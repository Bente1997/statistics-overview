<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Zoomable Decision Tree</title>
    <style>
        /* CSS for the container (optional, but good for defining max visible area) */
        .mermaid-container {
            width: 95%; /* Adjust as needed */
            height: 800px; /* Adjust as needed */
            margin: 20px auto; /* Center the container */
            border: 1px solid #ccc; /* Optional: for visual clarity */
            background-color: white;
            box-sizing: border-box;
            /* Important: disable default overflow as svg-pan-zoom will handle it */
            overflow: hidden; 
        }

        /* Basic styling for the body */
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            background-color: #f4f4f4;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        h1 {
            margin-top: 20px;
        }

        /* Optional: Styles for the diagram's class definitions */
        .test_name {
            fill:#e0f7fa;
            stroke:#00bcd4;
            stroke-width:2px;
            color:#212121;
        }
        .question {
            fill:#fffde7;
            stroke:#ffc107;
            stroke-width:2px;
            color:#212121;
        }
        .start {
            fill:#e8f5e9;
            stroke:#4caf50;
            stroke-width:2px;
            color:#212121;
        }
    </style>
</head>
<body>

    <h1>Decision Tree for Statistical Tests</h1>

    <div id="mermaid-zoom-container" class="mermaid-container">
        <pre class="mermaid">
graph TD
    A[Start: Type of Dependent Variable?] --> B{Categorical DV?};

    B -- Yes --> C{Groups Independent?};
    C -- Yes --> D{How many Categorical Variables?};
    D -- 2 Vars --> E[Chi-Square Test of Independence];
    D -- 1 DV, 1 IV (>2 levels) --> E;
    D -- 1 DV, 1 Continuous IV --> F[Logistic/Ordinal Logistic Regression];

    C -- No --> G{How many Related Groups (Dichotomous DV)};
    G -- 2 Groups --> H[McNemar's Test];
    G -- 3+ Groups --> I[Cochran's Q Test];
    G -- 3+ Groups (Ordinal DV) --> J[Repeated Measures Logistic Regression / Friedman (ranks)];

    B -- No --> K{Continuous DV?};
    K --> L{Looking for Relationship/Association?};
    L -- Yes --> M{Data Normally Distributed?};
    M -- Yes --> N[Pearson Correlation Coefficient];
    M -- No --> O[Spearman's Rank Correlation Coefficient];

    K --> P{Comparing Means/Distributions?};
    P -- Yes --> Q{Groups Independent?};

    Q -- Yes --> R{How many Independent Groups?};
    R -- Exactly 2 --> S{Data Normally Distributed (Shapiro-Wilk)?};
    S -- Yes --> T{Variances Equal (Levene's/F-test)?};
    T -- Yes --> U[Independent Samples t-test (Equal Variances)];
    T -- No --> V[Independent Samples t-test (Unequal Variances / Welch's)];
    S -- No --> W[Mann-Whitney U Test];

    R -- 3 or More --> X{Data Normally Distributed (for each group)?};
    X -- Yes --> Y{Variances Equal (Levene's Test)?};
    Y -- Yes --> Z["One/Two Way ANOVA"];
    Y -- No --> AA[Welch's ANOVA];
    X -- No --> BB[Kruskal-Wallis H Test];

    Q -- No --> CC{Groups Dependent?};
    CC -- Yes --> DD{How many Related Groups?};
    DD -- Exactly 2 --> EE{Data Normally Distributed (of differences)?};
    EE -- Yes --> FF[Paired Samples t-test];
    EE -- No --> GG[Wilcoxon Signed-Rank Test];

    DD -- 3 or More --> HH{Data Normally Distributed (for each condition)?};
    HH -- Yes --> II[Repeated Measures ANOVA];
    HH -- No --> JJ[Friedman Test];

    P -- Yes --> KK{Multiple IVs, Continuous DV?};
    KK -- Yes --> LL[Multiple Regression / Factorial ANOVA / ANCOVA];
    KK --> MM{Hierarchical/Nested Data / Complex Dependencies?};
    MM -- Yes --> NN[Linear Mixed Models / Hierarchical Linear Models];

    E[Chi-Square Test of Independence]:::test_name
    F[Logistic/Ordinal Logistic Regression]:::test_name
    H[McNemar's Test]:::test_name
    I[Cochran's Q Test]:::test_name
    J[Repeated Measures Logistic Regression / Friedman (ranks)]:::test_name

    N[Pearson Correlation Coefficient]:::test_name
    O[Spearman's Rank Correlation Coefficient]:::test_name

    U[Independent Samples t-test (Equal Variances)]:::test_name
    V[Independent Samples t-test (Unequal Variances / Welch's)]:::test_name
    W[Mann-Whitney U Test]:::test_name

    Z[One-Way ANOVA]:::test_name
    AA[Welch's ANOVA]:::test_name
    BB[Kruskal-Wallis H Test]:::test_name

    FF[Paired Samples t-test]:::test_name
    GG[Wilcoxon Signed-Rank Test]:::test_name

    II[Repeated Measures ANOVA]:::test_name
    JJ[Friedman Test]:::test_name

    LL[Multiple Regression / Factorial ANOVA / ANCOVA]:::test_name
    NN[Linear Mixed Models / Hierarchical Linear Models]:::test_name

    class A start;
    class B,C,D,G,K,L,M,P,Q,R,S,T,X,Y,CC,DD,EE,HH,KK,MM question;
        </pre>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/svg-pan-zoom@2.6.0/dist/svg-pan-zoom.min.js"></script>

    <script type="module">
        import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';

        // Configure Mermaid to disable max width for flowcharts
        // This is crucial so svg-pan-zoom can control the scaling
        mermaid.initialize({
            startOnLoad: true, // Mermaid renders on page load
            theme: 'neutral',
            flowchart: { useMaxWidth: false }, // Important for flowcharts
            graph: { useMaxWidth: false }, // For graph TD/LR diagrams
            // Add other diagram types if you use them, e.g.:
            // gantt: { useMaxWidth: false },
            // sequence: { useMaxWidth: false }
        });

        // Use a MutationObserver to wait for Mermaid to render the SVG
        // This is more robust than window.onload or setTimeout
        const targetNode = document.getElementById('mermaid-zoom-container');
        const config = { childList: true, subtree: true };

        const observer = new MutationObserver(function(mutationsList, observer) {
            for(const mutation of mutationsList) {
                if (mutation.type === 'childList' && mutation.addedNodes.length > 0) {
                    const mermaidSvg = targetNode.querySelector('svg');
                    if (mermaidSvg) {
                        // Stop observing once the SVG is found
                        observer.disconnect(); 
                        
                        // Initialize svg-pan-zoom on the SVG element
                        svgPanZoom(mermaidSvg, {
                            zoomEnabled: true,
                            controlIconsEnabled: true, // Shows +/- buttons
                            fit: true, // Fit diagram to container initially
                            center: true, // Center diagram initially
                            minZoom: 0.1, // Minimum zoom level (e.g., 10%)
                            maxZoom: 10, // Maximum zoom level (e.g., 1000%)
                            zoomScaleSensitivity: 0.2, // How fast zoom changes with mouse wheel
                            dbClickZoomEnabled: false // Disable double click zoom if you prefer manual controls
                        });
                        break; // SVG found, no need to check other mutations
                    }
                }
            }
        });

        // Start observing the target node for configured mutations
        observer.observe(targetNode, config);

    </script>

</body>
</html>
